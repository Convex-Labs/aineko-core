test_pipeline_runs:
  runs:
    test_run_1:
      start_int: "0"
      duration: "300"
    test_run_2:
      start_int: "1"
      duration: "300"

  machine_config:
    type: ec2
    mem: 16
    vcpu: 4

  aws_secrets:
    - test/aineko_secret

  nodes:
    # Test actor with no input, single output, and params
    sequencer:
      class: aineko.tests.conftest.TestSequencer
      outputs:
        - integer_sequence
        - env_var
      params:
        start_int: $start_int
        num_messages: 25
        sleep_time: 1

    # Test actor with single input and single output
    doubler:
      class: aineko.tests.conftest.TestDoubler
      inputs:
        - integer_sequence
      outputs:
        - integer_doubles
      params:
        duration: 40
